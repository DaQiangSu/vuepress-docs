<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | 技术文档</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="一个记录文档, 认知, 见解的技术文档网站">
    <meta name="keywords" content="个人博客,文档,java,后端,vuepress,docs,vuepress,主题,vuepress主题,blog">
    
    <link rel="preload" href="/assets/css/0.styles.23a7f009.css" as="style"><link rel="preload" href="/assets/js/app.437210bc.js" as="script"><link rel="preload" href="/assets/js/2.35bcc82c.js" as="script"><link rel="preload" href="/assets/js/19.e3f0ba71.js" as="script"><link rel="prefetch" href="/assets/js/10.f65f9c6a.js"><link rel="prefetch" href="/assets/js/11.adb0c9f3.js"><link rel="prefetch" href="/assets/js/12.bf4c51e7.js"><link rel="prefetch" href="/assets/js/13.0fd8c51b.js"><link rel="prefetch" href="/assets/js/14.011b492c.js"><link rel="prefetch" href="/assets/js/15.c3aae275.js"><link rel="prefetch" href="/assets/js/16.5bf12ed6.js"><link rel="prefetch" href="/assets/js/17.8b3da5f7.js"><link rel="prefetch" href="/assets/js/18.7139ad65.js"><link rel="prefetch" href="/assets/js/20.c56c2151.js"><link rel="prefetch" href="/assets/js/21.dc116046.js"><link rel="prefetch" href="/assets/js/22.1d2a879f.js"><link rel="prefetch" href="/assets/js/23.5323af3e.js"><link rel="prefetch" href="/assets/js/24.73b63133.js"><link rel="prefetch" href="/assets/js/25.bcdcb515.js"><link rel="prefetch" href="/assets/js/26.2f5b943d.js"><link rel="prefetch" href="/assets/js/27.df10dd39.js"><link rel="prefetch" href="/assets/js/28.33b5756c.js"><link rel="prefetch" href="/assets/js/29.26a0cdbd.js"><link rel="prefetch" href="/assets/js/3.42d92c65.js"><link rel="prefetch" href="/assets/js/30.1e026668.js"><link rel="prefetch" href="/assets/js/31.811b0574.js"><link rel="prefetch" href="/assets/js/32.838481af.js"><link rel="prefetch" href="/assets/js/33.4a7ffa81.js"><link rel="prefetch" href="/assets/js/34.2e500707.js"><link rel="prefetch" href="/assets/js/35.dcaeceb7.js"><link rel="prefetch" href="/assets/js/36.8ece6673.js"><link rel="prefetch" href="/assets/js/37.0b7b8120.js"><link rel="prefetch" href="/assets/js/4.118eb2e5.js"><link rel="prefetch" href="/assets/js/5.0d171000.js"><link rel="prefetch" href="/assets/js/6.5915e912.js"><link rel="prefetch" href="/assets/js/7.7fe19636.js"><link rel="prefetch" href="/assets/js/8.bfd78fab.js"><link rel="prefetch" href="/assets/js/9.eaabd6d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.23a7f009.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview-questions/" class="nav-link">
  刷面试题
</a></div><div class="nav-item"><a href="/software-installation/" class="nav-link router-link-active">
  软件安装
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务系列文档" class="dropdown-title"><span class="title">微服务系列文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务系列文档" class="mobile-dropdown-title"><span class="title">微服务系列文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/springcloud/" class="nav-link">
  springcloud
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  格式化工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zy.isryan.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的网址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview-questions/" class="nav-link">
  刷面试题
</a></div><div class="nav-item"><a href="/software-installation/" class="nav-link router-link-active">
  软件安装
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务系列文档" class="dropdown-title"><span class="title">微服务系列文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务系列文档" class="mobile-dropdown-title"><span class="title">微服务系列文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/springcloud/" class="nav-link">
  springcloud
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  格式化工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zy.isryan.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的网址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/software-installation/" aria-current="page" class="sidebar-link">Linux基本功能</a></li><li><a href="/software-installation/JDK.html" class="sidebar-link">JDK8</a></li><li><a href="/software-installation/MySQL.html" class="sidebar-link">MySQL5.7</a></li><li><a href="/software-installation/Idea.html" class="sidebar-link">Idea</a></li><li><a href="/software-installation/Redis.html" class="sidebar-link">Redis</a></li><li><a href="/software-installation/Git.html" class="sidebar-link">Git</a></li><li><a href="/software-installation/SVN.html" class="sidebar-link">SVN</a></li><li><a href="/software-installation/MongoDB.html" class="sidebar-link">MongoDB</a></li><li><a href="/software-installation/Zookeeper.html" class="sidebar-link">Zookeeper</a></li><li><a href="/software-installation/Kafka.html" class="sidebar-link">Kafka</a></li><li><a href="/software-installation/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/software-installation/Docker.html" aria-current="page" class="active sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#linux安装" class="sidebar-link">Linux安装</a></li><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#windows安装" class="sidebar-link">Windows安装</a></li><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#docker常用命令" class="sidebar-link">Docker常用命令</a></li><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#容器常用命令" class="sidebar-link">容器常用命令</a></li><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#私有仓库搭建" class="sidebar-link">私有仓库搭建</a></li><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#将镜像上传至私有仓库" class="sidebar-link">将镜像上传至私有仓库</a></li><li class="sidebar-sub-header"><a href="/software-installation/Docker.html#从私有仓库拉取镜像" class="sidebar-link">从私有仓库拉取镜像</a></li></ul></li><li><a href="/software-installation/Tomcat.html" class="sidebar-link">Tomcat</a></li><li><a href="/software-installation/Nacos.html" class="sidebar-link">Nacos</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <h2 id="linux安装"><a href="#linux安装" class="header-anchor">#</a> Linux安装</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1、yum 包更新到最新 </span>
yum update
<span class="token comment"># 2、安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的 </span>
yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
<span class="token comment"># 3、 设置yum源</span>
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
<span class="token comment"># 4、 解决centos 8的安装docker失败情况  </span>
yum <span class="token function">install</span> https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm
<span class="token comment"># 5、 安装docker，出现输入的界面都按 y </span>
yum <span class="token function">install</span> -y docker-ce
<span class="token comment"># 6、 查看docker版本，验证是否验证成功</span>
docker -v


</code></pre></div><h2 id="windows安装"><a href="#windows安装" class="header-anchor">#</a> Windows安装</h2> <h2 id="docker常用命令"><a href="#docker常用命令" class="header-anchor">#</a> Docker常用命令</h2> <p>查看镜像 默认存储地址/var/lib/docker</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker images 
</code></pre></div><p>搜索镜像</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker search <span class="token comment">#镜像名字</span>
</code></pre></div><p>拉取镜像 默认最新版本</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker pull <span class="token comment">#镜像名称</span>
</code></pre></div><p>删除镜像</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">rm</span> <span class="token comment">#镜像ID</span>
docker rmi <span class="token variable"><span class="token variable">`</span>docker images -q<span class="token variable">`</span></span> <span class="token comment">#删除所有镜像</span>
</code></pre></div><h2 id="容器常用命令"><a href="#容器常用命令" class="header-anchor">#</a> 容器常用命令</h2> <p>查看正在运行的容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">ps</span>
</code></pre></div><p>查看所有容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">ps</span>
</code></pre></div><p>查看最后一次运行的容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">ps</span> -l
</code></pre></div><p>查看停止的容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">ps</span> -f status-exited
</code></pre></div><p>docker命令参数</p> <div class="language-bash extra-class"><pre class="language-bash"><code>-i <span class="token comment">#运行容器</span>

-t <span class="token comment">#标识容器启动后，进入容器终端内</span>

-name: <span class="token comment">#容器命名</span>

-v <span class="token comment">#标识目录映射关系</span>

-d <span class="token comment">#启动后 创建一个守护式容器后台运行</span>

-p <span class="token comment">#端口映射</span>

--restart<span class="token operator">=</span>always <span class="token comment">#自启动</span>

<span class="token builtin class-name">exit</span> <span class="token comment">#退出容器</span>
</code></pre></div><p>交互式方式启动</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker run -it --name<span class="token operator">=</span>容器名称 指定镜像名称:标签 /bin/bash
</code></pre></div><p>守护进程方式启动</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker run -di --name<span class="token operator">=</span>容器名称 指定镜像名称:标签 /bin/bash
</code></pre></div><p>进入守护进程容器内</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token builtin class-name">exec</span> -it 容器名称
</code></pre></div><p>停止容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker stop 容器名称/ID
</code></pre></div><p>启动容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker start 容器名称/ID
</code></pre></div><p>复制文件进容器内</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">cp</span> 文件地址  容器名称:容器内地址
</code></pre></div><p>复制容器内的文件到宿主机</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">cp</span> 容器名称:容器内文件地址 文件地址
</code></pre></div><h2 id="私有仓库搭建"><a href="#私有仓库搭建" class="header-anchor">#</a> 私有仓库搭建</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1、拉取私有仓库镜像 </span>
docker pull registry
<span class="token comment"># 2、启动私有仓库容器 </span>
docker run -id --name<span class="token operator">=</span>registry -p <span class="token number">5000</span>:5000 registry
<span class="token comment"># 3、打开浏览器 输入地址http://私有仓库服务器ip:5000/v2/_catalog，看到{&quot;repositories&quot;:[]} 表示私有仓库 搭建成功</span>
<span class="token comment"># 4、修改daemon.json   </span>
<span class="token function">vim</span> /etc/docker/daemon.json    
<span class="token comment"># 在上述文件中添加一个key，保存退出。此步用于让 docker 信任私有仓库地址；注意将私有仓库服务器ip修改为自己私有仓库服务器真实ip </span>
<span class="token punctuation">{</span><span class="token string">&quot;insecure-registries&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;私有仓库服务器ip:5000&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span> 
<span class="token comment"># 5、重启docker 服务 </span>
systemctl restart docker
docker start registry

</code></pre></div><h2 id="将镜像上传至私有仓库"><a href="#将镜像上传至私有仓库" class="header-anchor">#</a> 将镜像上传至私有仓库</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1、标记镜像为私有仓库的镜像     </span>
docker tag centos:7 私有仓库服务器IP:5000/centos:7
 
<span class="token comment"># 2、上传标记的镜像     </span>
docker push 私有仓库服务器IP:5000/centos:7

</code></pre></div><h2 id="从私有仓库拉取镜像"><a href="#从私有仓库拉取镜像" class="header-anchor">#</a> 从私有仓库拉取镜像</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#拉取镜像 </span>
docker pull 私有仓库服务器ip:5000/centos:7
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/27/2020, 2:09:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/software-installation/Nginx.html" class="prev">
        Nginx
      </a></span> <span class="next"><a href="/software-installation/Tomcat.html">
        Tomcat
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.437210bc.js" defer></script><script src="/assets/js/2.35bcc82c.js" defer></script><script src="/assets/js/19.e3f0ba71.js" defer></script>
  </body>
</html>
